<html>
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
    <meta http-equiv="cleartype" content="on">
    <style>
    @import '/css/search.css';
    </style>
</head>
<body>
    <img src="http://static.responsivenews.co.uk/img/logo.png" id="logo"/>
    <div id="page">
        <p class="about">Unofficial BBC Mobile search. Content unavailble prior to 1st March 2012 or thereabouts.</p>
    
        <div id="search">
            <form action="/news/search" method="get">
                <input type="search" id="q" name="q" results="5" value="<%= (@term) ? @term : '' %>">
                <input type="submit" value="Go">
            </form>
        </div>

        <div id="fav">
         <p id="favourite">Save this search.</p>
         <p id="favourite-list"></p>
         <p id="favourite-clear">Clear saved searches.</p>
        </div>

        <% if @search %>

         <ul>
            <% @search['links'].each_with_index do |link, i| %>
              <% if (/href="([0-9a-z]+)/.match(link)) then %>
                <li>
                    <%= @search['datetime'][i] %>
                    <%= link.gsub!('href="', 'href="http://m.bbc.co.uk/news/') %>
                    <%= @search['about'][i] %>
                </li>
              <% end %>
            <% end %>
         </ul>

         <div id="nextback">
            <% if (@search['previous'] || (@search['next'].to_s == "page=3")) then %>
                <a class="back" href="search?q=<%= @search['term'] %>&amp;<%= (@search['previous']) ? @search['previous'] : 'page=1' %>">Previous</a>
            <% end %>

            <% if (@search['next']) then %>
                <a class="next" href="search?q=<%= @search['term'] %>&amp;<%= @search['next'] %>">Next</a>
            <% end %>
         </div>

        <% else %>

         <p>'<%= @term %>' not found.</p>

        <% end %>

    </div>
    <script type="application/javascript" src="/js/local_storage.js"></script>
</body>
</html>


